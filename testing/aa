---
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-openai-egress
  namespace: code-analyzer
spec:
  podSelector:
    matchLabels:
      app: code-analyzer
  policyTypes:
    - Egress
  egress:
    - to:
        - ipBlock:
            cidr: <openai-instance-ip-address>/32  # Replace with the IP of the OpenAI instance
      ports:
        - protocol: TCP
          port: 443   # Allow HTTPS traffic to OpenAI instance
